!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MediaTag=e():t.MediaTag=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=147)}([function(t,e,n){"use strict";var r={IMAGE:"image",AUDIO:"audio",VIDEO:"video",PDF:"pdf",DASH:"dash",DOWNLOAD:"download",CRYPTO:"crypto",CLEAR_KEY:"clear-key",MEDIA_OBJECT:"media-object"};t.exports=r},function(t,e,n){"use strict";var r={MATCHER:"matcher",RENDERER:"renderer",FILTER:"filter",SANITIZER:"sanitizer"};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),a=n(5),s=n(3),f=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,c.MATCHER,a.ANY));return i.targetType=n,i}return i(e,t),u(e,[{key:"getTargetType",value:function(){return this.targetType}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n,o){r(this,t),this.identifier=e,this.type=n,this.occurrence=o}return o(t,[{key:"getIdentifier",value:function(){if(this.identifier)return this.identifier;throw new Error("Plugin has not identifier")}},{key:"getType",value:function(){if(this.type)return this.type;throw new Error("Plugin has no type")}},{key:"getOccurrence",value:function(){if(this.occurrence)return this.occurrence;throw new Error("Plugin has no occurrence")}},{key:"start",value:function(t){return this.process(t)}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),c=n(5),a=n(3),s=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u.RENDERER,c.ONCE))}return i(e,t),e}(a);t.exports=s},function(t,e,n){"use strict";var r={EVERY:"every",ANY:"any",ONCE:"once"};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.map={}}return o(t,[{key:"isStored",value:function(t){return!!this.get(t)}},{key:"store",value:function(t,e){this.isStored(t)&&console.warn('The key "'+t+'" is already registered, the content will be overwritten.'),this.map[t]=e}},{key:"unstore",value:function(t){if(!1!==this.isStored(t)){var e=this.map[t];return delete this.map[t],e}console.warn('The key "'+t+'" not exists in this manager')}},{key:"get",value:function(t){return this.map[t]}},{key:"keys",value:function(){return Object.keys(this.map)}},{key:"values",value:function(){var t=this;return this.keys().map(function(e){return t.get(e)})}}]),t}();t.exports=i},function(t,e,n){var r=n(19),o=n(50),i=n(51),u=n(73),c=n(54),a=function(t,e,n){var s,f,l,p,h=t&a.F,y=t&a.G,v=t&a.S,b=t&a.P,d=t&a.B,g=y?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,w=y?o:o[e]||(o[e]={}),m=w.prototype||(w.prototype={});y&&(n=e);for(s in n)f=!h&&g&&void 0!==g[s],l=(f?g:n)[s],p=d&&f?c(l,r):b&&"function"==typeof l?c(Function.call,l):l,g&&u(g,s,l,t&a.U),w[s]!=l&&i(w,s,p),b&&m[s]!=l&&(m[s]=l)};r.core=o,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){var n=this;r(this,t),Object.keys(e.attributes).forEach(function(t){n[e.attributes[t].name]=e.attributes[t].value})}return o(t,[{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"removeAttribute",value:function(t){delete this[t]}},{key:"hasAttributes",value:function(){return Object.keys(this)>0}}]),t}();t.exports=i},function(t,e,n){"use strict";var r=n(18),o=n(17);t.exports=function(t,e){e.mediaObjects.forEach(function(t){r(t)}),e.activeMediaObject=t,o(t)}},function(t,e,n){var r=n(125)("wks"),o=n(97),i=n(19).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),c=n(5),a=n(3),s=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u.FILTER,c.ANY))}return i(e,t),e}(a);t.exports=s},,,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(11),a=n(0),s=n(6),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.CRYPTO))}return i(e,t),u(e,[{key:"process",value:function(t){var n=t.getAttribute("data-crypto-key"),r=/\w+:/.exec(n);if(null===r)throw new Error("No algorithm scheme found in data-crypto-key");var o=r[0],i=o.replace(":",""),u=n.replace(o,"");if(t.setAttribute("data-crypto-key",u),!e.functionStore.isStored(i))throw new Error("Algorithm "+i+" is not registered");e.functionStore.get(i)(t)}}]),e}(c);f.functionStore=f.functionStore||new s,f.mediaTypes=[],f.setAllowedMediaTypes=function(t){f.mediaTypes=t},f.getAllowedMediaTypes=function(){return f.mediaTypes},f.addAllowedMediaType=function(t){f.mediaTypes.push(t)},f.addAllAllowedMediaTypes=function(t){t.forEach(function(t){f.addAllowedMediaType(t)})},f.removeAllowedMediaType=function(t){var e=f.mediaTypes.indexOf(t);e>=0&&f.mediaTypes.splice(e,1)},f.removeAllAllowedMediaTypes=function(t){t.forEach(function(t){f.removeAllowedMediaType(t)})},f.isAllowedMediaType=function(t){return f.mediaTypes.some(function(e){return e===t})},t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(4),u=n(11),c=n(2),a=n(23),s=n(3),f=n(32),l=n(33),p=n(1),h=function(){function t(e){var n=this;r(this,t),Object.keys(e).forEach(function(t){n[t]=e[t]})}return o(t,[{key:"isAllowed",value:function(t){return this.permissions&&this.permissions[t]?this.permissions[t]!==l.FORBIDDEN:l.ALLOWED}},{key:"getPermission",value:function(t){return this.permissions&&this.permissions[t]?this.permissions[t]:l.ALLOWED}},{key:"getPermissions",value:function(){return this.permissions||{}}},{key:"getPlugins",value:function(){var t=this;return this.plugins?Object.keys(this.plugins).map(function(e){return Object.keys(t.plugins[e]).map(function(n){var r=void 0;switch(n){case p.RENDERER:r=new i(e);break;case p.FILTER:r=new u(e);break;case p.SANITIZER:r=new a(e);break;case p.MATCHER:r=new c(e);break;case p.GROUP:r=new f(e,n);break;default:r=new s(e,n)}return Object.keys(t.plugins[e][n]).forEach(function(o){var i=t.plugins[e][n][o];r[o]="function"==typeof i&&"process"===o?function(t,e){return function(n){return e(t,n)}}(r,i):i}),r})}).reduce(function(t,e){return t.concat(e)}):[]}},{key:"getDefaultPlugin",value:function(){var t=this.processingEngine.defaultPlugin;return this.getPlugins().filter(function(e){return e.identifier===t}).reduce(function(t,e){return t.getType()!==p.MATCHER?t:e})}}]),t}();t.exports=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.content=[]}return o(t,[{key:"stack",value:function(t){this.content.push(t)}},{key:"unstack",value:function(){return this.content.pop()}},{key:"top",value:function(){return this.content[this.content.length-1]}},{key:"base",value:function(){return this.content[0]}},{key:"isEmpty",value:function(){return 0===this.content.length}},{key:"length",value:function(){return this.content.length}}]),t}();t.exports=i},function(t,e,n){"use strict";t.exports=function(t){t.element.style.display="block";var e=!0,n=!1,r=void 0;try{for(var o,i=t.hookedFns.children()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0)o.value.style.display="block"}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},function(t,e,n){"use strict";t.exports=function(t){t.element.style.display="none";var e=!0,n=!1,r=void 0;try{for(var o,i=t.hookedFns.children()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0)o.value.style.display="none"}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";var r=n(53);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},,function(t,e,n){"use strict";function r(t){return Array.isArray(t)||(t=[t]),t=t.filter(function(t){return t}),r.loadConfigurations(t).then(function(){return r.start(t)})}var o=n(30),i=n(37),u=n(38),c=n(45);r.start=function(t){var e=r.loadingEngine||r.processingEngine;return Promise.all(t.map(function(t){return new Promise(function(n){t.hasAttribute("src")||t.hasAttribute("sources")?new u(t,r.processingEngine).mediaObjects.forEach(function(o){t.mediaObject=o,o.loader=r.loader,n(e.start(o))}):n(console.warn("Element skipped because has no sources",t))})}))},r.update=function(t){"store"!==t.origin&&t.getPlugins().forEach(function(t){var e=r.pluginStore.getPlugins(t.getType()).filter(function(e){return e.getIdentifier()===t.getIdentifier()&&e.getType()===t.getType()});if(e.length>1)throw new Error("More than one plugin matched to update for this pass");1===e.length?e.forEach(function(e){Object.keys(t).forEach(function(n){e[n]=t[n]})}):r.pluginStore.store(t)})},r.configure=function(t){(r.loadingEngine||r.processingEngine).configure(t)},r.loadConfigurations=function(t){var e=t.filter(function(t){return t.hasAttribute("configuration")}).map(function(t){return t.getAttribute("configuration")}).reduce(function(t,e){return t.includes(e)||t.push(e),t},[]).map(function(t){return r.loader.configuration(t)});return Promise.all(e).then(function(t){var e=[];return t.forEach(function(t){r.update(t),r.configure(t),t.dependencies&&t.dependencies.forEach(function(t){e.includes(t)||e.push(t)})}),Promise.all(e.map(function(t){return r.loader.script(t)}))})},r.pluginStore=r.pluginStore||new i,r.processingEngine=r.processingEngine||new o(r.pluginStore),r.loader=new c,t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(1),c=n(5),a=n(3),s=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u.SANITIZER,c.EVERY))}return i(e,t),e}(a);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.DOWNLOAD));return i.message=t,i.buttonMessage=n||"Download",i}return i(e,t),u(e,[{key:"process",value:function(t){var e=document.createElement("button");e.innerHTML=this.buttonMessage,e.onclick=function(){var e=new XMLHttpRequest,n=t.getAttribute("src");e.open("GET",n,!0),e.responseType="blob",e.onload=function(){var n=e.response;if(n)if(t.name)saveAs(n,t.name);else if(t.getAttribute("data-attr-type")){var r=t.getAttribute("data-attr-type"),o=r.split("/"),i=new File([n],"download."+(o[1]||"txt"),{type:r});saveAs(i)}else saveAs(n)},e.send()},t.utilsSetAllDataAttributes(e),t.replaceContents([e]),t.return()}}]),e}(c);t.exports=s},function(t,e,n){var r=n(84),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},,,,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u={PluginExists:function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,'Plugin with same "'+t.identifier+'" identifier found.'))}return i(e,t),e}(Error),TypeNotFound:function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Media Tag could not find the content type of an instance.}."))}return i(e,t),e}(Error),FilterExists:function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,'Filter with same "'+t.identifier+' identifier found."'))}return i(e,t),e}(Error),FetchFail:function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,'Could not fetch "'+t.url+'", received "'+t.status+": "+t.statusText+'".'))}return i(e,t),e}(Error),InvalidCryptoKey:function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Invalid cryptographic key."))}return i(e,t),e}(Error),InvalidCryptoLib:function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Invalid cryptographic algorithm name."))}return i(e,t),e}(Error),FailedCrypto:function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Failed to decrypt file"+(t&&t.message?" "+t.message:"")+"."))}return i(e,t),e}(Error)};t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(31),u=n(15),c=n(1),a=n(34),s=n(24),f=n(6),l=n(35),p=n(36),h=n(16),y=function(){function t(e){r(this,t),i.that(e).not(void 0),this.pluginStore=e,this.stacks=new l,this.snapshots=new l,this.stats=new f,this.configuration=new u({}),this.defaultPlugin=new s("<p> MediaTag cannot find a plugin able to render your content </p>"),this.STACK_SIZE=50,this.SNAPSHOTS_LIMIT=50}return o(t,[{key:"key",value:function(t){return t.getId()}},{key:"configure",value:function(t){var e=this;this.configuration=t,t.processingEngine&&Object.keys(t.processingEngine).forEach(function(n){e[n]="defaultPlugin"===n?t.getDefaultPlugin():n})}},{key:"isConfigured",value:function(){return Boolean(this.configuration)}},{key:"prepare",value:function(t){var e=this;!function(){t.return=function(){return e.return(t)},t.state="processing"}();var n=t.getId();this.stacks.store(n,new p),this.snapshots.store(n,new h),this.stats.store(n,{})}},{key:"start",value:function(t){this.prepare(t),this.routine(t),this.run(t)}},{key:"run",value:function(t){var e=this.key(t),n=this.stacks.top(e);if(!n)return this.end(t);this.configuration?this.configuration.isAllowed(n.identifier)?(n.process||console.warn("FALSY PLUGIN",n),n.process(t)):(this.skip(t,n),this.return(t)):n.process(t)}},{key:"routine",value:function(t){this.fill(t),this.snapshot(t),this.check(t)}},{key:"snapshot",value:function(t){var e=this.key(t),n=this.stacks.get(e).clone();this.snapshots.stack(e,n)}},{key:"fill",value:function(t){var e=this,n=this.key(t),r=this.pluginStore.values(),o=r.filter(function(t){return t.getType()===c.MATCHER}).filter(function(e){return e.process(t)}).map(function(t){return t.getIdentifier()}),i=r.filter(function(t){return t.getType()!==c.MATCHER}).filter(function(t){return o.includes(t.getIdentifier())}),u=a.filterByOccurrencies(i);Object.keys(u).forEach(function(r){u[r].forEach(function(r){e.configuration.isAllowed(r.getIdentifier())?e.stacks.get(n).isStackable(r)&&e.stacks.stack(n,r):e.skip(t,r)})})}},{key:"skip",value:function(t,e){var n=t.getId(),r=this.stats.get(n);r?r.skipped||(r.skipped=[]):r={skipped:[]},r.skipped.push(e.identifier)}},{key:"unstack",value:function(t){var e=t.getId();return this.stacks[e]?this.stacks[e].pop():null}},{key:"check",value:function(t){var e=t.getId();if(this.stacks.length(e)>=this.STACK_SIZE)throw console.error("SNAPSHOTS",this.snapshots.get(e)),new Error("Plugin stack size exceed");if(this.snapshots.length(e)>=this.SNAPSHOT_LIMIT)throw console.error("SNAPSHOTS",this.snapshots.get(e)),new Error("Plugin snapshots count exceed");var n=0;if(this.stacks.plugins(e).forEach(function(t){t.type===c.RENDERER&&n++}),n>1)throw console.error("SNAPSHOTS",this.snapshots.get(e)),new Error("More of one renderer in the stack");if(0===this.stacks.length(e)&&!this.stats.get(e)[c.RENDERER]){if(!this.defaultPlugin)throw new Error("No default plugin assignated");this.stacks.stack(e,this.defaultPlugin)}}},{key:"return",value:function(t){var e=t.getId(),n=this.stacks.unstack(e);if(!n)return this.end(t);try{this.stats.get(e)||this.stats.store(e,{}),this.stats.get(e)[n.type]?this.stats.get(e)[n.type]+=1:this.stats.get(e)[n.type]=1}catch(t){console.error(t,this.snapshots.get(e))}n.type!==c.SANITIZER&&n.type!==c.RENDERER&&this.fill(t),this.snapshot(t),this.check(t),this.run(t)}},{key:"end",value:function(t){return t.status="processed",t}},{key:"setDefaultPlugin",value:function(t){this.defaultPlugin=t}}]),t}();t.exports=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){r(this,t),this.truth=e}return o(t,[{key:"is",value:function(t){if(this.truth===t)return this;throw new Error("Assertion fail on : "+this.truth+" is "+t)}},{key:"not",value:function(t){if(this.truth!==t)return this;throw new Error("Assertion fail on : "+this.truth+" is not "+t)}}],[{key:"that",value:function(e){return new t(e)}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(3),a=function(t){function e(t,n,i){r(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return u.plugins=[],u}return i(e,t),u(e,[{key:"addPlugin",value:function(t){!1===this.plugins.includes(t)&&this.plugins.push(t)}},{key:"removePlugin",value:function(t,e,n){if(!t)throw new Error("Identifier is null or undefined");this.plugin.filter(function(r){return e&&n?t===r.identifier&&e===r.type&&n===r.occurrence:e?t===r.identifier&&e===r.type:t===r.identifier})}},{key:"start",value:function(t){this.plugins.forEach(function(e){e.start(t)})}}]),e}(c);t.exports=a},function(t,e,n){"use strict";var r={ALLOWED:"allowed",REQUIRED:"required",FORBIDDEN:"forbidden"};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t)}return o(t,null,[{key:"filterByOccurrence",value:function(t,e){return t.filter(function(t){return t.occurrence===e})}},{key:"filterByOccurrencies",value:function(t){var e={once:[],any:[],every:[]},n=!0,r=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value;e[c.occurrence]?e[c.occurrence].push(c):e[c.occurrence]=Array.of(c)}}catch(t){r=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}return e}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(6),a=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"stack",value:function(t,e){this.get(t).stack(e)}},{key:"unstack",value:function(t){return this.get(t).unstack()}},{key:"top",value:function(t){return this.get(t).top()}},{key:"base",value:function(t){return this.get(t).base()}},{key:"isEmpty",value:function(t){return this.get(t).isEmpty()}},{key:"length",value:function(t){return this.get(t).content.length}},{key:"plugins",value:function(t){return this.get(t).content}}]),e}(c);t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},a=n(5),s=n(1),f=n(3),l=n(16),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"isPlugin",value:function(t){return t instanceof f}},{key:"isStackable",value:function(t){return[this.isPlugin(t),!this.content.some(function(e){return e.getIdentifier()===t.getIdentifier()&&e.getType()===t.getType()&&e.getOccurrence()===t.getOccurrence()&&(t.occurrence===a.ONCE||t.occurrence===a.ANY)})].reduce(function(t,e){return t&&e})}},{key:"stack",value:function(t){if(!this.isPlugin(t))throw new Error("It can't stacks a non plugin instance");if(!this.isStackable(t))throw new Error("A unique plugin cannot by stacked multiple times");c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stack",this).call(this,t)}},{key:"hasRenderer",value:function(){return this.content.some(function(t){return t.type===s.renderer})}},{key:"isEndingByRenderer",value:function(){return this.base().type===s.RENDERER}},{key:"clone",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"plugins",value:function(){return this.content()}}]),e}(l);t.exports=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},a=n(6),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"getPlugins",value:function(t){return this.values().filter(function(e){return e.type===t})}},{key:"store",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"store",this).call(this,[t.identifier,t.type],t)}},{key:"unstore",value:function(t){if(!1!==e.isStored([t.identifier,t.type]))return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unstore",this).call(this,[t.identifier,t.type]);console.warn('The key "'+[t.identifier,t.type]+'" not exists in this manager')}}]),e}(a);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(39),u=n(8),c=n(43),a=function(){function t(e,n){var o=this;r(this,t),this.mediaTagElement=e,this.processingEngine=n;var a=new u(e),s=a.getAttribute("sources")||a.getAttribute("srcs");if(s){var f=this.extractSourceObjects(s),l=this.extractMediaElements(f);this.mediaElements=l,this.mediaElements.forEach(function(t){o.mediaTagElement.appendChild(t)}),this.mediaObjects=this.createMediaObjects(l),i.activate(this.mediaObjects[0],this)}else{var p=new c(e);this.mediaObjects=[p],this.activeMediaObject=this.mediaObjects[0]}}return o(t,[{key:"extractSourceObjects",value:function(t){return JSON.parse(t)}},{key:"extractMediaElements",value:function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.extractMediaElement(t))}),n}},{key:"extractMediaElement",value:function(t){var e=document.createElement("media");return Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])}),e}},{key:"createMediaObjects",value:function(t){var e=[];return t.forEach(function(t){var n=new c(t);e.push(n)}),e}}]),t}();t.exports=a},function(t,e,n){"use strict";var r={clear:n(40),show:n(17),hide:n(18),upgrade:n(41),downgrade:n(42),activate:n(9)};t.exports=r},function(t,e,n){"use strict";t.exports=function(t){t.clearContents()}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t){var e=t.mediaObjects.indexOf(t.activeMediaObject);e<t.mediaObjects.length&&r(t.mediaObjects[e+1],t)}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t){var e=t.mediaObjects.indexOf(t.activeMediaObject);e>0&&r(t.mediaObjects[e-1],t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(8),u=n(44),c=function(){function t(e){r(this,t),this.id=t.uid(),this.element=e,this.state="idle",this.attributesObject=new i(e);var n=u.parse(this.attributesObject),o=!0,c=!1,a=void 0;try{for(var s,f=Object.keys(n)[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var l=s.value;this[l]=n[l]}}catch(t){c=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(c)throw a}}this.hookedFns={hasChildNodes:e.hasChildNodes.bind(e),removeChild:e.removeChild.bind(e),getLastChild:function(){return e.lastChild},appendChild:e.appendChild.bind(e),children:function(){return e.children}}}return o(t,[{key:"setProperties",value:function(t){for(var e in t){if(this[e])throw new Error("The property "+e+" already exists in this MediaObject !");this[e]=t[e]}}},{key:"getId",value:function(){return this.id}},{key:"getAttribute",value:function(t){return this.attributesObject[t]}},{key:"setAttribute",value:function(t,e){this.attributesObject[t]=e}},{key:"removeAttribute",value:function(t){delete this.attributesObject[t]}},{key:"getAllDataAttrKeys",value:function(){return Object.keys(this.attributesObject).filter(function(t){return t.startsWith("data-attr")})}},{key:"getExtension",value:function(){return this.extension}},{key:"getMimeType",value:function(){return this.mime}},{key:"hasAttribute",value:function(t){return t in this.attributesObject}},{key:"getType",value:function(){return this.type}},{key:"getSource",value:function(){return this.src}},{key:"getSources",value:function(){return this.sources}},{key:"clearContents",value:function(){for(;this.hookedFns.hasChildNodes();)this.hookedFns.removeChild(this.hookedFns.getLastChild())}},{key:"replaceContents",value:function(t){var e=this;this.clearContents(),t.forEach(function(t){return e.hookedFns.appendChild(t)})}},{key:"utilsSetAllDataAttributes",value:function(t){var e=this;this.getAllDataAttrKeys().forEach(function(n){return t.setAttribute(n.substr(10),e.getAttribute(n))})}},{key:"utilsPassAllDataAttributes",value:function(t){var e=this;this.getAllDataAttrKeys().forEach(function(n){return t.setAttribute(n,e.getAttribute(n))})}}]),t}();c.uid=function(t){return function(){return t++}}(0),c.attributesObject=function(t){var e={};if(t.hasAttributes()){var n=t.attributes;Object.keys(n).forEach(function(t){var r=n[t];e[r.name]=r.value})}return e.hasAttribute=function(t){return e[t]},e},t.exports=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t)}return o(t,null,[{key:"extension",value:function(t){var e=t.getAttribute("data-type");if(e)return e.split("/")[1]}},{key:"type",value:function(t){var e=t.getAttribute("data-type");if(e)return e.split("/")[0]}},{key:"mime",value:function(t){return t.getAttribute("data-type")}},{key:"protocol",value:function(t){var e=t.getAttribute("src").split("://");return e.length>1?e[0]:window.location.protocol}},{key:"hostname",value:function(t){var e=t.getAttribute("src").split("://");return e.length>1?e[1].split("/")[0]:window.location.hostname}},{key:"source",value:function(t){return t.getAttribute("src")}},{key:"schemes",value:function(t){return/\w+:/.exec(t.getAttribute("src"))}},{key:"sources",value:function(t){var e=t.getAttribute("sources")||t.getAttribute("srcs");return e?JSON.parse(e):null}},{key:"actions",value:function(t){var e=t.getAttribute("actions");return e?JSON.parse(e):null}},{key:"parse",value:function(e){return{protocol:t.protocol(e),hostname:t.hostname(e),src:t.source(e),type:t.type(e),extension:t.extension(e),mime:t.mime(e),sources:t.sources(e),actions:t.actions(e)}}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(6),u=n(15),c=function(){function t(){r(this,t),this.store=new i,this.promiseStore=new i}return o(t,[{key:"isStored",value:function(t){return this.store.isStore(t)}},{key:"script",value:function(t){return this.promiseStore.isStored(t)||this.promiseStore.store(t,new Promise(function(e,n){var r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=e,r.onerror=n,r.abort=n,document.head.appendChild(r)})),this.promiseStore.get(t)}},{key:"configuration",value:function(t){var e=this;return this.store.isStored(t)?new Promise(function(n){n(new u(e.store.get(t)))}):new Promise(function(n,r){var o=document.createElement("script");o.src=t,o.type="text/javascript",document.addEventListener("Configuration",function(r){var o=r.configuration;e.store.isStored(t)?o.origin="store":(e.store.store(t,r.configuration),o.origin=t),n(new u(o))}),o.onerror=function(t){r(t)},document.head.appendChild(o)})}},{key:"algorithm",value:function(t){var e=this;return this.promiseStore.isStored(t)||this.promiseStore.store(t,new Promise(function(n,r){var o=document.createElement("script");o.src=t,o.type="text/javascript",document.addEventListener("Algorithm",function(r){e.store.isStored(t)||e.store.store(t,r.algorithm),n(e.store.get(t))}),o.onerror=function(t){r(t)},document.head.appendChild(o)})),this.promiseStore.get(t)}}]),t}();t.exports=c},function(t,e,n){var r=n(52);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(94);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(54),o=n(85),i=n(47),u=n(25),c=n(165);t.exports=function(t,e){var n=1==t,a=2==t,s=3==t,f=4==t,l=6==t,p=5==t||l,h=e||c;return function(e,c,y){for(var v,b,d=i(e),g=o(d),w=r(c,y,3),m=u(g.length),O=0,_=n?h(e,m):a?h(e,0):void 0;m>O;O++)if((p||O in g)&&(v=g[O],b=w(v,O,d),t))if(n)_[O]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return O;case 2:_.push(v)}else if(f)return!1;return l?-1:s||f?f:_}}},,function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(71),o=n(96);t.exports=n(72)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(55);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=t.getAttribute("src"),n=t.getAttribute("data-crypto-key"),r=c.getKeyFromStr(n),o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){var e=o.response;if(e){var n=new Uint8Array(e),i=c.decrypt(n,r),u=a.getBlobUrl(i,t.getMimeType()),s=new Event("decryption");s.blob=new Blob([i],{type:t.getMimeType()}),window.document.dispatchEvent(s),t.setAttribute("src",u),t.removeAttribute("data-crypto-key"),t.return()}},o.send(null)}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(29),c=(n(14),function(){function t(){r(this,t)}return i(t,null,[{key:"slice",value:function(t){return Array.prototype.slice.call(t)}},{key:"getRandomKeyStr",value:function(){var t=window.nacl,e=t.randomBytes(18);return t.util.encodeBase64(e)}},{key:"getKeyFromStr",value:function(t){var e=window.nacl;return e.hash(e.util.decodeBase64(t)).subarray(32,64)}},{key:"encrypt",value:function(e,n){var r=e,o=window.nacl.randomBytes(24),i=window.nacl.secretbox(r,o,n);if(i)return new Uint8Array(t.slice(o).concat(t.slice(i)));throw new Error}},{key:"decrypt",value:function(e,n){if(e.length<24)throw new Error;var r=t.slice,o=window.nacl,i=new Uint8Array(r(e).slice(0,24)),u=new Uint8Array(r(e).slice(24)),c=o.secretbox.open(u,i,n);if(c)return c;throw new Error("Decrypted file in undefined")}}]),t}()),a=function(){function t(){r(this,t)}return i(t,null,[{key:"getArrayBuffer",value:function(t){return fetch(t).then(function(t){if(t.ok)return t.arrayBuffer();throw new u.FetchFails}).then(function(t){return t})}},{key:"createUrl",value:function(t){return window.URL.createObjectURL(t)}},{key:"getBlobUrl",value:function(t,e){return window.URL.createObjectURL(new Blob([t],{type:e}))}},{key:"getDataUrl",value:function(t,e){return"data:"+e+";base64,"+window.nacl.util.encodeBase64(t)}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=e.type.split("/"),r=e.type,o=n[0],i=n[1];s.isAllowedMediaType(r)?(t.setAttribute("data-type",e.type),t.type=o,t.extension=i,t.mime=r):console.log("Not allowed metadata, allowed ones are : ",s.getAllowedMediaTypes()),t.name=e.name,t.setAttribute("data-attr-type",e.type)}function i(t){var e=t.getAttribute("src"),n=t.getAttribute("data-crypto-key"),r=f.getKeyFromStr(n),i=new XMLHttpRequest,u=[e,n].join(""),c=function(e){var n=function(e){a.processingEngine.return(t),"function"==typeof e&&e(t)},r={};r.metadata=e.metadata,o(t,e.metadata);var i=e.content,u=l.getBlobUrl(i,t.getMimeType());if(r.blob=new Blob([i],{type:t.getMimeType()}),r.metadata=e.metadata,s.addAllowedMediaType("audio/mpeg"),t.setAttribute("src",u),t.removeAttribute("data-crypto-key"),/audio\/(mp3|ogg|wav|webm|mpeg)/.test(e.metadata.type)||/application\/pdf/.test(e.metadata.type)||/video\//.test(e.metadata.type)||/image\/(png|jpeg|jpg|gif)/.test(e.metadata.type)||(e.metadata.type="download"),o(t,e.metadata),r.callback=n,!window.MediaTag_onDecrypted)return void setTimeout(n);window.MediaTag_onDecrypted(r)},p=a.__Cryptpad_Cache=a.__Cryptpad_Cache||{};if(p[u])return c(p[u]);i.open("GET",e,!0),i.responseType="arraybuffer";var h=function(t){var e=new Event("decryptionError");e.message="string"==typeof t?t:t.message,window.document.dispatchEvent(e)};i.onload=function(){if(/^4/.test(""+this.status))return h("XHR_ERROR",this.status);var t=i.response;if(t){var e=new Uint8Array(t);f.decrypt(e,r,function(t,e){if(t)return h(t);p[u]=e,c(e)})}},i.send(null)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(29),a=n(22),s=n(14),f=function(){function t(){r(this,t)}return u(t,null,[{key:"createNonce",value:function(){return new Uint8Array(new Array(24).fill(0))}},{key:"increment",value:function(t){for(var e=t.length;e-- >1;){if("number"!=typeof t[e])throw new Error("E_UNSAFE_TYPE");if(t[e]>255)throw new Error("E_OUT_OF_BOUNDS");if(255!==t[e])return void t[e]++;if(t[e]=0,0===e)throw new Error("E_NONCE_TOO_LARGE")}}},{key:"encodePrefix",value:function(t){return[65280,255].map(function(e,n){return(t&e)>>8*(1-n)})}},{key:"decodePrefix",value:function(t){return t[0]<<8|t[1]}},{key:"joinChunks",value:function(t){return new Blob(t)}},{key:"slice",value:function(t){return Array.prototype.slice.call(t)}},{key:"getRandomKeyStr",value:function(){var t=window.nacl,e=t.randomBytes(18);return t.util.encodeBase64(e)}},{key:"getKeyFromStr",value:function(t){return window.nacl.util.decodeBase64(t)}},{key:"encrypt",value:function(e,n){var r=e,o=window.nacl.randomBytes(24),i=window.nacl.secretbox(r,o,n);if(i)return new Uint8Array(t.slice(o).concat(t.slice(i)));throw new Error}},{key:"decrypt",value:function(e,n,r){var o=window.nacl,i=function(t){var n=new Event("decryptionProgress");n.percent=t/e.length*100,window.document.dispatchEvent(n)},u=t.createNonce(),c=0,a=e.subarray(0,2),s=t.decodePrefix(a),f={metadata:void 0},l=new Uint8Array(e.subarray(2,2+s)),p=o.secretbox.open(l,u,n);t.increment(u);try{f.metadata=JSON.parse(o.util.encodeUTF8(p))}catch(t){return r("E_METADATA_DECRYPTION")}if(!f.metadata)return r("NO_METADATA");var h=function(r){setTimeout(function(){var a=131088*c+2+s,f=a+131088;c++;var l=new Uint8Array(e.subarray(a,f)),p=o.secretbox.open(l,u,n);if(t.increment(u),!p)return void r("DECRYPTION_FAILURE");i(Math.min(f,e.length)),r(void 0,p)})},y=[];!function n(){h(function(o,i){return o?setTimeout(function(){r(o)}):i?131088*c<e.length?(y.push(i),n()):(y.push(i),f.content=t.joinChunks(y),r(void 0,f)):void r("UNEXPECTED_ENDING")})}()}}]),t}(),l=function(){function t(){r(this,t)}return u(t,null,[{key:"getArrayBuffer",value:function(t){return fetch(t).then(function(t){if(t.ok)return t.arrayBuffer();throw new c.FetchFails}).then(function(t){return t})}},{key:"createUrl",value:function(t){return window.URL.createObjectURL(t)}},{key:"getBlobUrl",value:function(t,e){return window.URL.createObjectURL(new Blob([t],{type:e}))}},{key:"getDataUrl",value:function(t,e){return"data:"+e+";base64,"+window.nacl.util.encodeBase64(t)}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(11),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.CLEAR_KEY))}return i(e,t),u(e,[{key:"process",value:function(t){var e=t.getAttribute("data-clear-key"),n=e.substring(0,32),r=e.substring(33,65);t.setAttribute("id",n),t.setAttribute("key",r),t.removeAttribute("data-clear-key"),t.return()}}]),e}(c);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(23),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.MEDIA_OBJECT))}return i(e,t),u(e,[{key:"process",value:function(t){t.return()}}]),e}(c);t.exports=s},function(t,e,n){"use strict";var r=n(62),o=n(63),i=n(64),u=n(65),c=n(66),a=n(67),s=n(68),f=n(69),l=n(70),p=n(22);p.pluginStore.store(new r),p.pluginStore.store(new o),p.pluginStore.store(new i),p.pluginStore.store(new u),p.pluginStore.store(new c),p.pluginStore.store(new a),p.pluginStore.store(new s),p.pluginStore.store(new f),p.pluginStore.store(new l),t.exports=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.IMAGE,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){var e=/^png|jpg|jpeg|gif|svg[+]xml$/,n=/^image[\/](png|jpg|jpeg|gif|svg[+]xml)$/;return t.hasAttribute("src")&&"image"===t.getType()&&null!==e.exec(t.getExtension())&&null!==n.exec(t.getMimeType())}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.AUDIO,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){var e=/^mp3|ogg|webm|wav|mpeg$/,n=/^audio[\/](mp3|ogg|webm|wav|mpeg)$/;return t.hasAttribute("src")&&"audio"===t.getType()&&null!==e.exec(t.getExtension())&&null!==n.exec(t.getMimeType())}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.VIDEO,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){var e=/^mp4|ogg|webm$/,n=/^video[\/](mp4|ogg|webm)$/;return t.hasAttribute("src")&&"video"===t.getType()&&null!==e.exec(t.getExtension())&&null!==n.exec(t.getMimeType())}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.PDF,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){var e=/^pdf$/,n=/^application[\/]pdf$/;return t.hasAttribute("src")&&"application"===t.getType()&&null!==e.exec(t.getExtension())&&null!==n.exec(t.getMimeType())}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.DASH,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){var e=/^dash[+]xml$/,n=/^application[\/]dash[+]xml$/;return t.hasAttribute("src")&&"application"===t.getType()&&null!==e.exec(t.getExtension())&&null!==n.exec(t.getMimeType())}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.DOWNLOAD,a.RENDERER))}return i(e,t),u(e,[{key:"process",value:function(t){return t.hasAttribute("src")&&"download"===t.getType()}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.CRYPTO,a.FILTER))}return i(e,t),u(e,[{key:"process",value:function(t){return t.hasAttribute("data-crypto-key")}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.CLEAR_KEY,a.FILTER))}return i(e,t),u(e,[{key:"process",value:function(t){return t.hasAttribute("data-clear-key")}}]),e}(s);t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),a=n(1),s=n(2),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.MEDIA_OBJECT,a.SANITIZER))}return i(e,t),u(e,[{key:"process",value:function(t){return t.hasAttribute("src")&&t.hasAttribute("data-type")}}]),e}(s);t.exports=f},function(t,e,n){var r=n(46),o=n(151),i=n(152),u=Object.defineProperty;e.f=n(72)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(53)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(19),o=n(51),i=n(74),u=n(97)("src"),c=Function.toString,a=(""+c).split("toString");n(50).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,c){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(s&&(i(n,u)||o(n,u,t[e]?""+t[e]:a.join(String(e)))),t===r?t[e]=n:c?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||c.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(85),o=n(94);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(10)("unscopables"),o=Array.prototype;void 0==o[r]&&n(51)(o,r,{}),t.exports=function(t){o[r][t]=!0}},,,,,,,function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(84),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=n(88);document.addEventListener("DOMContentLoaded",function(){function t(t){var o=[];return t.forEach(function(t){t.addedNodes&&t.addedNodes.forEach(function(t){var i=n(t,"MEDIA-TAG").filter(e);o.push.apply(o,r(i)),"MEDIA-TAG"===t.nodeName&&o.push(t)}),"MEDIA-TAG"===t.target.nodeName&&"childList"!==t.type&&(o.includes(t.target)||o.push(t.target))}),o}function e(t){return t.mediaObjects?t.mediaObjects.some(function(t){return"idle"===t.state}):!t.mediaObject||"idle"===t.mediaObject.state}function n(t,e){var r=[];if(!t.children)return r;var o=!0,i=!1,u=void 0;try{for(var c,a=t.children[Symbol.iterator]();!(o=(c=a.next()).done);o=!0){var s=c.value;s.nodeName===e&&r.push(s),r=r.concat(n(s,e))}}catch(t){i=!0,u=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw u}}return r}function i(t){return new Promise(function(e,n){try{t.length>0&&o(t),e()}catch(t){n(t)}})}function u(e){i(t(e)).catch(function(t){console.error(t)})}var c=new MutationObserver(u),a=document.body,s={characterData:!0,childList:!0,attributes:!0,subtree:!0};c.observe(a,s),i(Array.from(document.getElementsByTagName("media-tag")))}),t.exports=o},function(t,e,n){"use strict";var r=n(57),o=n(58),i=n(89),u=n(90),c=n(91),a=n(92),s=n(93),f=n(24),l=n(14),p=n(59),h=n(60),y=n(61);y.PdfPlugin=a,y.PdfPlugin.viewer="/pdfjs/web/viewer.html",l.functionStore.store("salsa20poly1305",r),l.functionStore.store("cryptpad",o),y.processingEngine.setDefaultPlugin(new f("<p> Media-Tag can't process your content </p>","Download")),y.CryptoFilter=l,y.CryptoFilter.setAllowedMediaTypes(["image/png","image/jpeg","image/jpg","image/gif","audio/mp3","audio/ogg","audio/wav","audio/webm","video/mp4","video/ogg","video/webm","application/pdf","application/dash+xml","download"]),y.pluginStore.store(new i),y.pluginStore.store(new u),y.pluginStore.store(new c),y.pluginStore.store(new a),y.pluginStore.store(new s),y.pluginStore.store(new f),y.pluginStore.store(new l),y.pluginStore.store(new p),y.pluginStore.store(new h),t.exports=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.IMAGE))}return i(e,t),u(e,[{key:"process",value:function(t){var e=document.createElement("img");e.setAttribute("src",t.getAttribute("src")),t.utilsSetAllDataAttributes(e),t.replaceContents([e]),t.return()}}]),e}(c);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.AUDIO))}return i(e,t),u(e,[{key:"process",value:function(t){var e=document.createElement("audio");e.setAttribute("src",t.getAttribute("src")),e.setAttribute("controls",!0),t.utilsSetAllDataAttributes(e),t.replaceContents([e]),t.return()}}]),e}(c);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.VIDEO))}return i(e,t),u(e,[{key:"process",value:function(t){var e=document.createElement("video");e.setAttribute("src",t.getAttribute("src")),e.setAttribute("controls",!0),t.utilsSetAllDataAttributes(e),t.replaceContents([e]),t.return()}}]),e}(c);t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s={PDFJS:"pdfjs",DEFAULT:"default"},f=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.PDF));return t.viewer=e.viewer,t.mode=e.mode,t}return i(e,t),u(e,[{key:"process",value:function(t){var e=t.getAttribute("src"),n=document.createElement("iframe");switch(t.getAttribute("data-attr-width")||n.setAttribute("width","100%"),t.getAttribute("data-attr-height")||n.setAttribute("height",document.body.scrollHeight),this.viewer||(this.mode=s.DEFAULT),this.mode){case s.PDFJS:var r=this.viewer+"?file="+e,o=new XMLHttpRequest;o.onload=function(){o.status<400?n.src=r:(console.warn("The pdfjs viewer has not been found ...\n\t\t\t\t\t\t\tThe browser viewer will be used by default"),n.src=""+e)},o.open("HEAD",r,!0),o.send();break;default:n.src=""+e}t.utilsSetAllDataAttributes(n),t.replaceContents([n]),n.onload=function(){t.return()}}}]),e}(c);f.viewer=null,f.mode=s.PDFJS,t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(4),a=n(0),s=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.DASH))}return i(e,t),u(e,[{key:"process",value:function(t){var e=document.createElement("video"),n=new shaka.Player(e),r=t.getAttribute("id"),o=t.getAttribute("key");if(r&&o){var i='{"'+r+'": "'+o+'"}',u=JSON.parse(i);n.configure({drm:{clearKeys:u}})}e.setAttribute("controls",!0),t.utilsSetAllDataAttributes(e),t.replaceContents([e]),n.load(t.getAttribute("src")).then(function(){}),t.return()}}]),e}(c);t.exports=s},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(52),o=n(19).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(125)("keys"),o=n(97);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(19).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(71).f,o=n(74),i=n(10)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(56),o=n(10)("toStringTag"),i="Arguments"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),o))?n:i?r(e):"Object"==(c=r(e))&&"function"==typeof e.callee?"Arguments":c}},,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(150)(!0);n(121)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(122),o=n(7),i=n(73),u=n(51),c=n(74),a=n(75),s=n(153),f=n(100),l=n(157),p=n(10)("iterator"),h=!([].keys&&"next"in[].keys()),y=function(){return this};t.exports=function(t,e,n,v,b,d,g){s(n,e,v);var w,m,O,_=function(t){if(!h&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",j="values"==b,k=!1,A=t.prototype,P=A[p]||A["@@iterator"]||b&&A[b],x=!h&&P||_(b),T=b?j?_("entries"):x:void 0,S="Array"==e?A.entries||P:P;if(S&&(O=l(S.call(new t)))!==Object.prototype&&O.next&&(f(O,E,!0),r||c(O,p)||u(O,p,y)),j&&P&&"values"!==P.name&&(k=!0,x=function(){return P.call(this)}),r&&!g||!h&&!k&&A[p]||u(A,p,x),a[e]=x,a[E]=y,b)if(w={values:j?x:_("values"),keys:d?x:_("keys"),entries:T},g)for(m in w)m in A||i(A,m,w[m]);else o(o.P+o.F*(h||k),e,w);return w}},function(t,e){t.exports=!1},function(t,e,n){var r=n(156),o=n(126);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(76),o=n(25),i=n(86);t.exports=function(t){return function(e,n,u){var c,a=r(e),s=o(a.length),f=i(u,s);if(t&&n!=n){for(;s>f;)if((c=a[f++])!=c)return!0}else for(;s>f;f++)if((t||f in a)&&a[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(19),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(56);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(75),o=n(10)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){"use strict";var r=n(71),o=n(96);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(101),o=n(10)("iterator"),i=n(75);t.exports=n(50).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(10)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){var r=n(55),o=n(47),i=n(85),u=n(25);t.exports=function(t,e,n,c,a){r(e);var s=o(t),f=i(s),l=u(s.length),p=a?l-1:0,h=a?-1:1;if(n<2)for(;;){if(p in f){c=f[p],p+=h;break}if(p+=h,a?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;a?p>=0:l>p;p+=h)p in f&&(c=e(c,f[p],p,s));return c}},function(t,e,n){"use strict";var r=n(19),o=n(71),i=n(72),u=n(10)("species");t.exports=function(t){var e=r[t];i&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(77),o=n(182),i=n(75),u=n(76);t.exports=n(121)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r,o,i,u=n(54),c=n(190),a=n(99),s=n(95),f=n(19),l=f.process,p=f.setImmediate,h=f.clearImmediate,y=f.MessageChannel,v=f.Dispatch,b=0,d={},g=function(){var t=+this;if(d.hasOwnProperty(t)){var e=d[t];delete d[t],e()}},w=function(t){g.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return d[++b]=function(){c("function"==typeof t?t:Function(t),e)},r(b),b},h=function(t){delete d[t]},"process"==n(56)(l)?r=function(t){l.nextTick(u(g,t,1))}:v&&v.now?r=function(t){v.now(u(g,t,1))}:y?(o=new y,i=o.port2,o.port1.onmessage=w,r=u(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",w,!1)):r="onreadystatechange"in s("script")?function(t){a.appendChild(s("script")).onreadystatechange=function(){a.removeChild(this),g.call(t)}}:function(t){setTimeout(u(g,t,1),0)}),t.exports={set:p,clear:h}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=o(e),this.reject=o(n)}var o=n(55);t.exports.f=function(t){return new r(t)}},,,,,,,,,,function(t,e,n){n(148),t.exports=n(87)},function(t,e,n){"use strict";n(149),n(183)},function(t,e,n){n(120),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(177),n(179),n(180),n(181),n(135),t.exports=n(50).Array},function(t,e,n){var r=n(84),o=n(94);t.exports=function(t){return function(e,n){var i,u,c=String(o(e)),a=r(n),s=c.length;return a<0||a>=s?t?"":void 0:(i=c.charCodeAt(a),i<55296||i>56319||a+1===s||(u=c.charCodeAt(a+1))<56320||u>57343?t?c.charAt(a):i:t?c.slice(a,a+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){t.exports=!n(72)&&!n(53)(function(){return 7!=Object.defineProperty(n(95)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(52);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var r=n(154),o=n(96),i=n(100),u={};n(51)(u,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(46),o=n(155),i=n(126),u=n(98)("IE_PROTO"),c=function(){},a=function(){var t,e=n(95)("iframe"),r=i.length;for(e.style.display="none",n(99).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;r--;)delete a.prototype[i[r]];return a()};t.exports=Object.create||function(t,e){var n;return null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[u]=t):n=a(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(71),o=n(46),i=n(123);t.exports=n(72)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),c=u.length,a=0;c>a;)r.f(t,n=u[a++],e[n]);return t}},function(t,e,n){var r=n(74),o=n(76),i=n(124)(!1),u=n(98)("IE_PROTO");t.exports=function(t,e){var n,c=o(t),a=0,s=[];for(n in c)n!=u&&r(c,n)&&s.push(n);for(;e.length>a;)r(c,n=e[a++])&&(~i(s,n)||s.push(n));return s}},function(t,e,n){var r=n(74),o=n(47),i=n(98)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(7);r(r.S,"Array",{isArray:n(127)})},function(t,e,n){"use strict";var r=n(54),o=n(7),i=n(47),u=n(128),c=n(129),a=n(25),s=n(130),f=n(131);o(o.S+o.F*!n(132)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,l,p=i(t),h="function"==typeof this?this:Array,y=arguments.length,v=y>1?arguments[1]:void 0,b=void 0!==v,d=0,g=f(p);if(b&&(v=r(v,y>2?arguments[2]:void 0,2)),void 0==g||h==Array&&c(g))for(e=a(p.length),n=new h(e);e>d;d++)s(n,d,b?v(p[d],d):p[d]);else for(l=g.call(p),n=new h;!(o=l.next()).done;d++)s(n,d,b?u(l,v,[o.value,d],!0):o.value);return n.length=d,n}})},function(t,e,n){"use strict";var r=n(7),o=n(130);r(r.S+r.F*n(53)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(7),o=n(76),i=[].join;r(r.P+r.F*(n(85)!=Object||!n(20)(i)),"Array",{join:function(t){return i.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(7),o=n(99),i=n(56),u=n(86),c=n(25),a=[].slice;r(r.P+r.F*n(53)(function(){o&&a.call(o)}),"Array",{slice:function(t,e){var n=c(this.length),r=i(this);if(e=void 0===e?n:e,"Array"==r)return a.call(this,t,e);for(var o=u(t,n),s=u(e,n),f=c(s-o),l=new Array(f),p=0;p<f;p++)l[p]="String"==r?this.charAt(o+p):this[o+p];return l}})},function(t,e,n){"use strict";var r=n(7),o=n(55),i=n(47),u=n(53),c=[].sort,a=[1,2,3];r(r.P+r.F*(u(function(){a.sort(void 0)})||!u(function(){a.sort(null)})||!n(20)(c)),"Array",{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),o(t))}})},function(t,e,n){"use strict";var r=n(7),o=n(48)(0),i=n(20)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(166);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(52),o=n(127),i=n(10)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(7),o=n(48)(1);r(r.P+r.F*!n(20)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),o=n(48)(2);r(r.P+r.F*!n(20)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),o=n(48)(3);r(r.P+r.F*!n(20)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),o=n(48)(4);r(r.P+r.F*!n(20)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),o=n(133);r(r.P+r.F*!n(20)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(7),o=n(133);r(r.P+r.F*!n(20)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(7),o=n(124)(!1),i=[].indexOf,u=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(u||!n(20)(i)),"Array",{indexOf:function(t){return u?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(7),o=n(76),i=n(84),u=n(25),c=[].lastIndexOf,a=!!c&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(a||!n(20)(c)),"Array",{lastIndexOf:function(t){if(a)return c.apply(this,arguments)||0;var e=o(this),n=u(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(7);r(r.P,"Array",{copyWithin:n(176)}),n(77)("copyWithin")},function(t,e,n){"use strict";var r=n(47),o=n(86),i=n(25);t.exports=[].copyWithin||function(t,e){var n=r(this),u=i(n.length),c=o(t,u),a=o(e,u),s=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===s?u:o(s,u))-a,u-c),l=1;for(a<c&&c<a+f&&(l=-1,a+=f-1,c+=f-1);f-- >0;)a in n?n[c]=n[a]:delete n[c],c+=l,a+=l;return n}},function(t,e,n){var r=n(7);r(r.P,"Array",{fill:n(178)}),n(77)("fill")},function(t,e,n){"use strict";var r=n(47),o=n(86),i=n(25);t.exports=function(t){for(var e=r(this),n=i(e.length),u=arguments.length,c=o(u>1?arguments[1]:void 0,n),a=u>2?arguments[2]:void 0,s=void 0===a?n:o(a,n);s>c;)e[c++]=t;return e}},function(t,e,n){"use strict";var r=n(7),o=n(48)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(77)("find")},function(t,e,n){"use strict";var r=n(7),o=n(48)(6),i="findIndex",u=!0;i in[]&&Array(1)[i](function(){u=!1}),r(r.P+r.F*u,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(77)(i)},function(t,e,n){n(134)("Array")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(184),n(120),n(185),n(186),t.exports=n(50).Promise},function(t,e,n){"use strict";var r=n(101),o={};o[n(10)("toStringTag")]="z",o+""!="[object z]"&&n(73)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){for(var r=n(135),o=n(123),i=n(73),u=n(19),c=n(51),a=n(75),s=n(10),f=s("iterator"),l=s("toStringTag"),p=a.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},y=o(h),v=0;v<y.length;v++){var b,d=y[v],g=h[d],w=u[d],m=w&&w.prototype;if(m&&(m[f]||c(m,f,p),m[l]||c(m,l,d),a[d]=p,g))for(b in r)m[b]||i(m,b,r[b],!0)}},function(t,e,n){"use strict";var r,o,i,u,c=n(122),a=n(19),s=n(54),f=n(101),l=n(7),p=n(52),h=n(55),y=n(187),v=n(188),b=n(189),d=n(136).set,g=n(191)(),w=n(137),m=n(192),O=n(193),_=a.TypeError,E=a.process,j=a.Promise,k="process"==f(E),A=function(){},P=o=w.f,x=!!function(){try{var t=j.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(A,A)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof e}catch(t){}}(),T=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},S=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u=o?e.ok:e.fail,c=e.resolve,a=e.reject,s=e.domain;try{u?(o||(2==t._h&&M(t),t._h=1),!0===u?n=r:(s&&s.enter(),n=u(r),s&&s.exit()),n===e.promise?a(_("Promise-chain cycle")):(i=T(n))?i.call(n,c,a):c(n)):a(r)}catch(t){a(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){d.call(a,function(){var e,n,r,o=t._v,i=C(t);if(i&&(e=m(function(){k?E.emit("unhandledRejection",o,t):(n=a.onunhandledrejection)?n({promise:t,reason:o}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=k||C(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},C=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){d.call(a,function(){var e;k?E.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),S(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=T(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,s(I,r,1),s(D,r,1))}catch(t){D.call(r,t)}}):(n._v=t,n._s=1,S(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};x||(j=function(t){y(this,j,"Promise","_h"),h(t),r.call(this);try{t(s(I,this,1),s(D,this,1))}catch(t){D.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(194)(j.prototype,{then:function(t,e){var n=P(b(this,j));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&S(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=s(I,t,1),this.reject=s(D,t,1)},w.f=P=function(t){return t===j||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!x,{Promise:j}),n(100)(j,"Promise"),n(134)("Promise"),u=n(50).Promise,l(l.S+l.F*!x,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(c||!x),"Promise",{resolve:function(t){return O(c&&this===u?j:this,t)}}),l(l.S+l.F*!(x&&n(132)(function(t){j.all(t).catch(A)})),"Promise",{all:function(t){var e=this,n=P(e),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;v(t,!1,function(t){var c=i++,a=!1;n.push(void 0),u++,e.resolve(t).then(function(t){a||(a=!0,n[c]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,o=m(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(54),o=n(128),i=n(129),u=n(46),c=n(25),a=n(131),s={},f={},e=t.exports=function(t,e,n,l,p){var h,y,v,b,d=p?function(){return t}:a(t),g=r(n,l,e?2:1),w=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(i(d)){for(h=c(t.length);h>w;w++)if((b=e?g(u(y=t[w])[0],y[1]):g(t[w]))===s||b===f)return b}else for(v=d.call(t);!(y=v.next()).done;)if((b=o(v,g,y.value,e))===s||b===f)return b};e.BREAK=s,e.RETURN=f},function(t,e,n){var r=n(46),o=n(55),i=n(10)("species");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(19),o=n(136).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,c=r.Promise,a="process"==n(56)(u);t.exports=function(){var t,e,n,s=function(){var r,o;for(a&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(a)n=function(){u.nextTick(s)};else if(!i||r.navigator&&r.navigator.standalone)if(c&&c.resolve){var f=c.resolve();n=function(){f.then(s)}}else n=function(){o.call(r,s)};else{var l=!0,p=document.createTextNode("");new i(s).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(46),o=n(52),i=n(137);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(73);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}}])});